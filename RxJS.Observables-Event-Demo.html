<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>RxJS Observable: Event Listener Example</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/2.5.2/rx.all.js" charset="utf-8"></script>
  </head>
  <body>
    <button type="button" name="button" id="button">Click Me</button>
    <script type="text/javascript">
    var Observable = Rx.Observable;
    var button = document.getElementById('button');

    // use event function provided by DOM
    // var handler = function(e) {
    //   alert('clicked');
    //   button.removeEventListener('click', handler);
    // };
    //
    // button.addEventListener('click', handler);


    // use Rx.Observable for event asynchronous sequence
    var clicks = Observable.fromEvent(button, 'click');
    var subscription = clicks.forEach(
      function onNext(value) {
        alert('clicked');
        subscription.dispose();
      },
      function onError(error) {
        console.log('ERROR!');
      },
      function onComplete() {
        console.log('done');
      }
    );
    </script>
  </body>
</html>
